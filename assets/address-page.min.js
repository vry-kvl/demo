(()=>{typeof window.Shopify=="undefined"&&(window.Shopify={});Shopify.bind=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.setSelectorByValue=function(t,e){for(var n=0,r=t.options.length;n<r;n++){var o=t.options[n];if(e==o.value||e==o.innerHTML)return t.selectedIndex=n,n}};Shopify.addListener=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)};Shopify.postLink=function(t,e){e=e||{};var n=e.method||"post",r=e.parameters||{},o=document.createElement("form");o.setAttribute("method",n),o.setAttribute("action",t);for(var a in r){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",a),i.setAttribute("value",r[a]),o.appendChild(i)}document.body.appendChild(o),o.submit(),document.body.removeChild(o)};Shopify.CountryProvinceSelector=function(t,e,n){this.countryEl=document.getElementById(t),this.provinceEl=document.getElementById(e),this.provinceContainer=document.getElementById(n.hideElement||e),Shopify.addListener(this.countryEl,"change",Shopify.bind(this.countryHandler,this)),this.initCountry(),this.initProvince()};Shopify.CountryProvinceSelector.prototype={initCountry:function(){var t=this.countryEl.getAttribute("data-default");Shopify.setSelectorByValue(this.countryEl,t),this.countryHandler()},initProvince:function(){var t=this.provinceEl.getAttribute("data-default");t&&this.provinceEl.options.length>0&&Shopify.setSelectorByValue(this.provinceEl,t)},countryHandler:function(t){var e=this.countryEl.options[this.countryEl.selectedIndex],n=e.getAttribute("data-provinces"),r=JSON.parse(n);if(this.clearOptions(this.provinceEl),r&&r.length==0)this.provinceContainer.style.display="none";else{for(var o=0;o<r.length;o++){var e=document.createElement("option");e.value=r[o][0],e.innerHTML=r[o][1],this.provinceEl.appendChild(e)}this.provinceContainer.style.display=""}},clearOptions:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},setOptions:function(t,e){for(var n=0,r=e.length;n<e.length;n++){var o=document.createElement("option");o.value=e[n],o.innerHTML=e[n],t.appendChild(o)}}};var s={customerAddresses:"[data-customer-addresses]",addressCountrySelect:"[data-address-country-select]",addressContainer:"[data-address]",toggleAddressButton:"button[aria-expanded]",cancelAddressButton:'button[type="reset"]',deleteAddressButton:"button[data-confirm-message]"},d={expanded:"aria-expanded",confirmMessage:"data-confirm-message"},c=class{constructor(){this.elements=this._getElements(),Object.keys(this.elements).length!==0&&(this._setupCountries(),this._setupEventListeners())}_getElements(){let e=document.querySelector(s.customerAddresses);return e?{container:e,addressContainer:e.querySelector(s.addressContainer),toggleButtons:document.querySelectorAll(s.toggleAddressButton),cancelButtons:e.querySelectorAll(s.cancelAddressButton),deleteButtons:e.querySelectorAll(s.deleteAddressButton),countrySelects:e.querySelectorAll(s.addressCountrySelect)}:{}}_setupCountries(){Shopify&&Shopify.CountryProvinceSelector&&(new Shopify.CountryProvinceSelector("AddressCountryNew","AddressProvinceNew",{hideElement:"AddressProvinceContainerNew"}),this.elements.countrySelects.forEach(e=>{let n=e.dataset.formId;new Shopify.CountryProvinceSelector(`AddressCountry${n}`,`AddressProvince${n}`,{hideElement:`AddressProvinceContainer${n}`})}))}_setupEventListeners(){this.elements.toggleButtons.forEach(e=>{e.addEventListener("click",this._handleAddEditButtonClick)}),this.elements.cancelButtons.forEach(e=>{e.addEventListener("click",this._handleCancelButtonClick)}),this.elements.deleteButtons.forEach(e=>{e.addEventListener("click",this._handleDeleteButtonClick)})}_toggleExpanded(e){e.setAttribute(d.expanded,(e.getAttribute(d.expanded)==="false").toString())}_handleAddEditButtonClick=({currentTarget:e})=>{this._toggleExpanded(e)};_handleCancelButtonClick=({currentTarget:e})=>{this._toggleExpanded(e.closest(s.addressContainer).querySelector(`[${d.expanded}]`))};_handleDeleteButtonClick=({currentTarget:e})=>{confirm(e.getAttribute(d.confirmMessage))&&Shopify.postLink(e.dataset.target,{parameters:{_method:"delete"}})}};window.addEventListener("load",()=>{new c});})();
